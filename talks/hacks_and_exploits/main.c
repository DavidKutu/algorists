#include <string.h>

void dummy()
{
  __asm__("jmpq *%r8"); //run the shellcode
}

void function( const char *str )
{
  char dummy[512] = { 0 };//here will saved our shellode
  __asm__("lea %0, %%r8" : "=m" (dummy));//load effective address of our shellcode in the register
  char buffer[10];
  strcpy( buffer, str );//vulnerability, bug, crash 
}

int main( int argc, char **argv )
{
  function( argv[1] );
  return 0;
}
